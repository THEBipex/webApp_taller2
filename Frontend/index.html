<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Taller 2 DevOps</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        .box { border: 1px solid #ccc; padding: 20px; border-radius: 8px; margin-top: 20px; }
        button { background-color: #007bff; color: white; border: none; padding: 10px 20px; cursor: pointer; }
        button:hover { background-color: #0056b3; }
    </style>
</head>
<body>
    <h1>Calculadora DevOps</h1>
    <div class="box">
        <h3>Estado del Sistema</h3>
        <p id="status">Conectando con backend...</p>
    </div>

    <div class="box">
        <h3>Sumar Números</h3>
        <input type="number" id="num1" placeholder="Número 1">
        <input type="number" id="num2" placeholder="Número 2">
        <button onclick="sumar()">Calcular</button>
        <p>Resultado: <strong id="resultado">-</strong></p>
    </div>

    <script>
        // NOTA: En producción real, esto debería apuntar a la IP del servidor
        // Para este taller, asumiremos que el navegador puede ver localhost
        const API_URL = "http://localhost:5000"; 

        async function checkStatus() {
            try {
                const res = await fetch(API_URL);
                const data = await res.json();
                document.getElementById('status').innerText = data.message;
                document.getElementById('status').style.color = "green";
            } catch (e) {
                document.getElementById('status').innerText = "Error conectando al Backend";
                document.getElementById('status').style.color = "red";
            }
        }

        async function sumar() {
            const n1 = document.getElementById('num1').value;
            const n2 = document.getElementById('num2').value;
            
            try {
                const res = await fetch(`${API_URL}/sumar`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({num1: n1, num2: n2})
                });
                const data = await res.json();
                document.getElementById('resultado').innerText = data.resultado || data.error;
            } catch (e) {
                console.error(e);
            }
        }

        checkStatus();
    </script>
</body>
</html>